apiVersion: admissionregistration.k8s.io/v1beta1
kind: ValidatingWebhookConfiguration
metadata:
  name: registrar
  labels:
    chart: "{{ $.Chart.Name }}-{{ $.Chart.Version }}"
    release: "{{ $.Release.Name }}"
    heritage: "{{ $.Release.Service }}"
webhooks:
  - name: registrar.spire.svc.cluster.local
    clientConfig:
      service:
        name: registrar
        namespace: spire
        path: "/validate"
        port: 8444
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZ4VENDQTYyZ0F3SUJBZ0lFWG11M3d6QU5CZ2txaGtpRzl3MEJBUXNGQURDQmpURUxNQWtHQTFVRUJoTUMKVlZNeEVUQVBCZ05WQkFnVENGWnBjbWRwYm1saE1STXdFUVlEVlFRSEV3cEJiR1Y0WVc1a2NtbGhNU1F3SWdZRApWUVFLRXh0RVpXTnBjR2hsY2lCVVpXTm9ibTlzYjJkNUlGTjBkV1JwYjNNeEZEQVNCZ05WQkFzVEMwVnVaMmx1ClpXVnlhVzVuTVJvd0dBWURWUVFERXhGUmRXbGphM04wWVhKMElDaFNiMjkwS1RBZUZ3MHlNREF6TVRNeE5qUXgKTXpsYUZ3MHpNREF6TVRFeE5qUXhNemxhTUlHVk1Rc3dDUVlEVlFRR0V3SlZVekVSTUE4R0ExVUVDQk1JVm1seQpaMmx1YVdFeEV6QVJCZ05WQkFjVENrRnNaWGhoYm1SeWFXRXhKREFpQmdOVkJBb1RHMFJsWTJsd2FHVnlJRlJsClkyaHViMnh2WjNrZ1UzUjFaR2x2Y3pFVU1CSUdBMVVFQ3hNTFJXNW5hVzVsWlhKcGJtY3hJakFnQmdOVkJBTVQKR1ZGMWFXTnJjM1JoY25RZ0tFbHVkR1Z5YldWa2FXRjBaU2t3Z2dJaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQwpEd0F3Z2dJS0FvSUNBUUN6TXAzMWQzSzNjYmdoclZXNnFyUDEyaWg2clU1YmlRQ1dGSXY0RHErN09uZVU0anY4CjdSZDhkeFEyWTdKSS9ZTG5wWCtUdWtmaXJ6WUNqSnNId2pVM29JSmtDaTNmZENXaGRHQXh4VXFRQmVZTDhscjYKclZia2VQdXFlaGVKYTg3NENyWEdLTjBZR1VXaWwzekVvK3BkakdQMnBLNEdLZFJzUmF5S3g5QUdIclYvUG1WaApLUTlROE13SFR4NkZwa25SaStMVEhKU09TbHF4bW1hZ1ZzSStueHJtUmNvNGdPSGVuVk1aL2FqTHVLeUh4L1oxCnhEWUg3M2d5N1poZkQvZE9EWU5Ic3ZmbWdVVnJMSU5wRkI0ZEZ0bk5oUjJNZStNTFowcW96Sno0ZE9nYmlJY0kKZk1NUE55dDlYNnlyVThMeFdIUk0vemY3Q0JKeVVzQUswRUpaUnNJOUFZbGJxdUJvWUxYdFozVFRRZkxNRE5BUApGQytNejZ5NUFRWEdWbDFIZXRyMW00WXZTeE1RTUp6a2VkNit1SUFJYXJ5TThwMllURXF6UWlUWndrclNJcHZqCnRvS0kvZUpmN3pUMS9Ma0ZRREFUdzJURUxHT09aZmZiR2h3OVFoZkFvWU12YXNVSFB6Z2Q4dHBaVlJnNTk1Z0sKeTNuM2czUS8zcVA2Y2I1cnorQVcwbkIzUk5HTGZnTTU2QUlnN2s5UHZnTWpFRjFlajdjSmxQNEN4MW00b2l4SApwbEh1UjBubGZQMDhPUmNSdEgyREpMYTBkaThCUkpwQ1d6ZzBLMEtXZGtnck4vOW5UVlF0cEZuRHNLbkRtWVliCnZTWUpoUTk5VXNseDQ5aXQ1NFN3RmVaUjlzQUlLU3ZGdFptWlQ4RmJQMi8zMUl6OHZ6RmZXT1JrM3dJREFRQUIKb3lNd0lUQU9CZ05WSFE4QkFmOEVCQU1DQVlZd0R3WURWUjBUQVFIL0JBVXdBd0VCL3pBTkJna3Foa2lHOXcwQgpBUXNGQUFPQ0FnRUFscmgyd1c5VGVhUk83alc0RktBZXFkUUUwWlFPSTZYMUJURWJoQmtueFdweWJTQXNXRURFCk1WVGxqQW1DN3c1L3g1VkJDYzcwcXB0VGdYZVlmYnhKQ1l1SUtIQXlSM2JIRnpZYU9ON1JSazdaM2xiVEVtbFEKVTlyTWJNQTFSZjArWFJqaUd3V1FDM1c0dnVJSFYvUTN1TjJ4cmxZOUM1MUVuNWJOczhRRzdkWWF2b01kaHRYVQpMOE91TmFZL3VrL0x5ZEVyZEROVXUxTlZWV1BtM1hid1RqTGpIOW1FQVhLY01YQUlOakU1UHNiYWVWTDMwYVBsCnpVSXJlSnIvVE1ubk9lL3BkYXNjTjZ3Q0RhVlgwUDQ2TmpEUDZNaHhXd1BkMUpEMUlYQldQVDIrY0k3Wk5HQlIKWnFJNXgrQVRXenFCSG55aHVGSnhzanlxTkQrV2l4cWIwN0hmQUNoTXZ3VTY4VXduVm5MTmpuSnFKc2VrSy9BRwp5RzcwbGM5ZU9obmdJdGw4MTRaOU03SEg3eE9RL29FYkh2TWZxYkhkSC9qU1JIUkdFU3VkOGxNcEJuUWM0OWxkCm9DMUxlSEM1SVUzemFKUXhEdWc4SjltK0JvWVFMa2k3QU1qYUFoL3NLRXRzOE5JT1hyUkRRRmNPR1FyZHhQVEsKOEY0dlNQSXR5c3B2Z0hjZFdHY3V0dE9iUUEvcXZuNWpYS0RVQUczU0E2NmtuTkZwOFZnTFdlNVg1cW15bmV2cQpZdzQ2cmo4Y0tjRHRqc0VCYVI2bXNOOGNoeXNxK3Z5bGlDVE4xUG8xaWNrb05LcWdQbHdPeEVUU1I3RDVJMi9kClZIYi9FVHpqZ29jSmtoL28ycGczSWdyNGljclhYNTYyRzc4RDNoZXdCYmI2T1dYVmxzcys3VWc9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZ2VENDQTZXZ0F3SUJBZ0lFWG11M3d6QU5CZ2txaGtpRzl3MEJBUXNGQURDQmpURUxNQWtHQTFVRUJoTUMKVlZNeEVUQVBCZ05WQkFnVENGWnBjbWRwYm1saE1STXdFUVlEVlFRSEV3cEJiR1Y0WVc1a2NtbGhNU1F3SWdZRApWUVFLRXh0RVpXTnBjR2hsY2lCVVpXTm9ibTlzYjJkNUlGTjBkV1JwYjNNeEZEQVNCZ05WQkFzVEMwVnVaMmx1ClpXVnlhVzVuTVJvd0dBWURWUVFERXhGUmRXbGphM04wWVhKMElDaFNiMjkwS1RBZUZ3MHlNREF6TVRNeE5qUXgKTXpsYUZ3MHpNREF6TVRFeE5qUXhNemxhTUlHTk1Rc3dDUVlEVlFRR0V3SlZVekVSTUE4R0ExVUVDQk1JVm1seQpaMmx1YVdFeEV6QVJCZ05WQkFjVENrRnNaWGhoYm1SeWFXRXhKREFpQmdOVkJBb1RHMFJsWTJsd2FHVnlJRlJsClkyaHViMnh2WjNrZ1UzUjFaR2x2Y3pFVU1CSUdBMVVFQ3hNTFJXNW5hVzVsWlhKcGJtY3hHakFZQmdOVkJBTVQKRVZGMWFXTnJjM1JoY25RZ0tGSnZiM1FwTUlJQ0lqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FnOEFNSUlDQ2dLQwpBZ0VBc0FiNFMwVXF2czFwNHk1SnZML3hpU3JzeDV6WlVGV0pGT0xORVYveGx1YkxqU1pZMUh0cUsxbnlLeER4CmlzNUxUS2FhRXo0alpGMmwremNuTzB1MmJDRU85RHR2OGNJajJEcmFHbHN2blkyaXp4RElhVTdDYi82UWp2S3YKTnZIeXVTV0NqYU5PcnZwTTJGNC9zLys3WVMvN2c5VklPcnVRUGF0TmZPVWh5dEN1T3ZSTU93VUR2SW15eElsTgpXbUMxTTBYK0dQRmhCZkkveUlvYmwvUGE2YmRTMEJkdjNEZ1dkYWhhU21pWHNGeFB4QVpxZlZYOUIwRkJGRDlvCnh0S29FcnQ2TE5ERm1oSXc1dnNVZnl5RzFod05KK0VWcG1lR0V2VVI2bHkvM0twTWVNM045eGg0QjRITkpKQ2UKc0ViNWx0RFc0Q1NKakVwYXJvSXdZUjU1eGJ4NG5wMGpRejB2cjNiZ2k4alJDRFc5WG9yRDNsUHk3d3VkK2FwUQpXekVDR25nT3UzY0wwdjB4N2ErR0I4VmJicG1QcVpweVIydGtlazBQdks5dnNEOWJqOXRmS0dNekhGQzY3M3VIClc3MGlLN2dhYm5YTEZvbnRDL2Jna2xPOGZHUTVpZTRQTlN5TEZtRFU0dEVteDNOeTdwbEwyUHpiMlliSHdYYVcKa2phZ05SMlFxcjhQUWVvSjN4RG5QNVRWV0ZPUzNZTDVDb1ZvZURjMFlURDZuRHM4amE2QmZZaDhyck5rK2k5MAo4Q2FSOGYyOStzeG5teTNseFBYQUxHZ1Z6ckpmQjFJaTErRGE1TjU0QUJjM2dPeTQrNXJVYTRaZE8yYTkxYkhiClJTR2o3MERpMzhCbnE0VGFNcUd6OFFkaXBOUEJpUVpOVXR2MTlmMkhGTE1iZ3FVQ0F3RUFBYU1qTUNFd0RnWUQKVlIwUEFRSC9CQVFEQWdHR01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dJQgpBRmFFdCtBa2NTTWlhRWRMTkRXL1RXTkVac3hSa1l0eUU0M0F0MjY5elZ1YmtrZkxzcmwzbE9pQmlFRWlNeUFmClgrL2VXcGVteEpydFZrd0dwSms2TnhhVjlUbFRFckNROCs2S2RFQnptMGtYYXZwM3hibWowYktqWUtFcWx5WmkKclQ0czlqNm5mTThxbjdwSG5KVWZsSTZqM3kvUjBqQ1VDYzdyNTBIZVRqamlqQUJuWmcvRzBtcnFRVGFTU2E0MAoxN0xVMCtOSzd3Q2VwdGw5MXE1TFdWODcrQ3VtejJBWGlvbWJtNlA4S2JPZjlTM3JQbjRrRzZvQWZ5YnNmN2llCmZHT1VIKzhEdUEwWUVTVWx0MTdxdThyZW1WZFJvTjRqZzcvMDhmVU5WUmxzdFFwUjUzaWdZdVVnMlBLSEY1ZUgKaWQyZ29qdjJJVHJGMk9SNlhKZmJmN0w4Rm1KVmxjZnU3cVZ6OCtkYTZVN01jRThta0V3empzcENGUlZQbkpFbQpiRTR4ODU0R3Q1SEJjUzF6eUUwNDYwQVkzd1Avbm9zeE5nR2NIbzVwYjFDL1hXSWxmaUt4cGxRM3Y1dXRERCtDCmNaM2VscmlEU1R4ek9tU2NvZ3dNNzdnejM2a0RzZ2MwOUY1RC9UeTRlVitsekFQZFVzOUxjZVcvZ242aHpIT1UKTko1QUhkMU00UW5jWUhRL0hZREtkbk5yN0pJUjFLVDErTytLZkNNS0p4THVSR0tKL2pVSjVPUWJDYitjbGJsZQpNdnM5UFg0ZTNoWFhxdlNObGVHdG91ZHB0MENPWlVydzNFZTdKV1NsVzUwang4QVg4TGdML2tHb0J3d1pxYTF2CmQyeFVVbUkvanY0eGswY0RmdVF0bEFBaitXUFpyaGk2d2VSSVZsZGJFVWUvCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KCg==
    admissionReviewVersions:
      - v1beta1
    rules:
      - apiGroups:
          - ""
        apiVersions:
          - "v1"
        operations:
          - "CREATE"
          - "DELETE"
        resources:
          - "pods"
        scope: "Namespaced"
